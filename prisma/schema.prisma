// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘   ğŸ½ï¸  AI WEEKLY MEAL PLANNER - DATABASE SCHEMA                            â•‘
// â•‘                                                                           â•‘
// â•‘   This schema defines all database tables for the meal planning app:      â•‘
// â•‘   â€¢ Recipes - Saved and AI-generated recipes                              â•‘
// â•‘   â€¢ Ingredients - Recipe ingredients with quantities                      â•‘
// â•‘   â€¢ NutritionInfo - Macros and nutritional data                           â•‘
// â•‘   â€¢ MealPlan - Weekly meal plan containers                                â•‘
// â•‘   â€¢ PlannedMeal - Individual meal slots with state                        â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸ“– RECIPE                                                                 â”‚
// â”‚ Core recipe data - title, description, times, source                      â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
model Recipe {
  id          String   @id @default(cuid())
  title       String
  description String?
  imageUrl    String?

  // â±ï¸ Timing
  prepTime    Int?     // in minutes
  cookTime    Int?     // in minutes
  totalTime   Int?     // in minutes
  servings    Int?

  // ğŸ“ Instructions (stored as JSON array of steps)
  instructions String[]

  // ğŸ·ï¸ Categorization
  cuisine     String?  // e.g., "Italian", "Mexican", "Asian"
  mealType    String[] // e.g., ["breakfast", "lunch", "dinner", "snack"]
  dietaryTags String[] // e.g., ["vegetarian", "vegan", "gluten-free"]
  difficulty  String?  // "easy", "medium", "hard"

  // ğŸ“ Source tracking
  source      String?  // "ai-generated", "instagram", "manual", "website"
  sourceUrl   String?  // Original URL if imported

  // ğŸ• Timestamps
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // ğŸ”— Relations
  ingredients   Ingredient[]
  nutritionInfo NutritionInfo?
  plannedMeals  PlannedMeal[]

  // ğŸ“š Book status - is this saved to the recipe book?
  inRecipeBook  Boolean @default(false)

  @@index([title])
  @@index([cuisine])
  @@index([inRecipeBook])
}

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸ¥• INGREDIENT                                                             â”‚
// â”‚ Recipe ingredients with quantities and units                              â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
model Ingredient {
  id       String  @id @default(cuid())
  name     String
  quantity Float?
  unit     String? // e.g., "cups", "tbsp", "g", "oz"
  notes    String? // e.g., "diced", "room temperature"

  // ğŸ”— Relations
  recipeId String
  recipe   Recipe @relation(fields: [recipeId], references: [id], onDelete: Cascade)

  @@index([recipeId])
  @@index([name])
}

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸ“Š NUTRITION INFO                                                         â”‚
// â”‚ Macros, calories, and micronutrients per serving                          â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
model NutritionInfo {
  id          String @id @default(cuid())

  // ğŸ”¥ Main macros (per serving)
  calories    Int?
  protein     Float? // grams
  carbs       Float? // grams
  fat         Float? // grams
  fiber       Float? // grams
  sugar       Float? // grams

  // ğŸ§‚ Micronutrients (optional)
  sodium      Float? // mg
  cholesterol Float? // mg

  // ğŸ’¡ AI estimation flag
  isEstimated Boolean @default(true) // true if AI-estimated, false if from source

  // ğŸ”— Relations
  recipeId String @unique
  recipe   Recipe @relation(fields: [recipeId], references: [id], onDelete: Cascade)
}

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸ“… MEAL PLAN                                                              â”‚
// â”‚ Weekly meal plan container - groups meals for a specific week             â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
model MealPlan {
  id        String   @id @default(cuid())

  // ğŸ“† Week identification
  weekStart DateTime // Monday of the week

  // ğŸ• Timestamps
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ğŸ”— Relations
  meals     PlannedMeal[]

  @@unique([weekStart])
  @@index([weekStart])
}

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸ´ PLANNED MEAL                                                           â”‚
// â”‚ Individual meal slot - connects a recipe to a specific day and meal type  â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
model PlannedMeal {
  id         String   @id @default(cuid())

  // ğŸ“† When
  date       DateTime
  mealType   MealType // breakfast, lunch, dinner

  // ğŸ”„ State
  status     MealStatus @default(SUGGESTED)

  // ğŸ”— Relations
  mealPlanId String
  mealPlan   MealPlan @relation(fields: [mealPlanId], references: [id], onDelete: Cascade)

  recipeId   String
  recipe     Recipe   @relation(fields: [recipeId], references: [id], onDelete: Cascade)

  // ğŸ• Timestamps
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@unique([mealPlanId, date, mealType])
  @@index([mealPlanId])
  @@index([date])
  @@index([status])
}

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸ·ï¸ ENUMS                                                                  â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

enum MealType {
  BREAKFAST
  LUNCH
  DINNER
}

enum MealStatus {
  SUGGESTED  // AI suggested, not yet validated
  VALIDATED  // User approved this meal
}
